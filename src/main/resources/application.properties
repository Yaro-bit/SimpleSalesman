# === Production Configuration for SimpleSalesman on Railway ===

# --- Database Configuration ---
# Environment variables provided by Railway
spring.datasource.url=jdbc:postgresql://${PGHOST}:${PGPORT:5432}/${PGDATABASE:simplesalesman}
spring.datasource.username=${PGUSER:postgres}
spring.datasource.password=${PGPASSWORD:admin}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Server port (Railway automatically assigns the port, we use the environment variable)
server.port=${PORT:8081}

# --- OAuth2 Resource Server (JWT via Keycloak) ---
# Keycloak issuer URI from environment variable
spring.security.oauth2.resourceserver.jwt.issuer-uri=${KEYCLOAK_ISSUER_URI:https://keycloak-production-38c4.up.railway.app/auth/realms/simple-salesman-backend}

# Optionally use JWK Set URL for public key retrieval
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${KEYCLOAK_ISSUER_URI}/protocol/openid-connect/certs

# --- Spring DevTools (disable for production) ---
spring.devtools.restart.enabled=false

# --- Actuator Endpoints ---
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# --- SimpleSalesman Web GUI Configuration ---
# Keycloak Configuration
simplesalesman.keycloak.base-url=${KEYCLOAK_BASE_URL:https://keycloak-production-38c4.up.railway.app/auth}
simplesalesman.keycloak.realm=${KEYCLOAK_REALM:simple-salesman-backend}
simplesalesman.keycloak.client-id=${KEYCLOAK_CLIENT_ID:simple-salesman-backend}

# --- API Information ---
simplesalesman.api.title=Simple Salesman API
simplesalesman.api.description=OAuth2 Authentication Flow

# --- Default Values for Form Fields ---
simplesalesman.defaults.address-id=1
simplesalesman.defaults.project-id=1
simplesalesman.defaults.note-id=1
simplesalesman.defaults.region=Hier eintragen.
simplesalesman.defaults.username=Hier eintragen.
simplesalesman.defaults.note-text=Hier eintragen.
simplesalesman.defaults.update-text=Update: Hier eintragen.

# --- Debug Mode (enable additional logging in frontend) ---
simplesalesman.debug=false

# --- Thymeleaf Configuration ---
spring.thymeleaf.cache=true  # Enable caching in production for better performance
spring.thymeleaf.enabled=true
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# --- File Upload Configuration ---
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
